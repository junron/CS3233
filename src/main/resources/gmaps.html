<html lang="en-US">
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <style type="text/css">
        html {
            height: 100%
        }

        body {
            height: 100%;
            margin: 0px;
            padding: 0px
        }

        #map_canvas {
            height: 100%;
            background-color: #666970;
        }
    </style>
    <script type="text/javascript"
            src="http://maps.google.com/maps/api/js?sensor=false&key=AIzaSyA8brN4wvrYeARVOUub8YfBeFTOsbH4BeU">
    </script>
    <script type="text/javascript">
        var uninit = [];
      function addMarker(lat, long, title) {
        var coords = {lat, lng: long};
        if(!document.map){
          uninit.push([title,coords]);
        }
        new google.maps.Marker({
          position: coords,
          map: document.map,
          title
        })
      }

      function initialize() {
        window.console.log = function (message) {
          document.getElementById("errors").innerHTML += "Log: " + message.toString() + "<br>";
        };
        window.console.error = function (message) {
          document.getElementById("errors").innerHTML += "Error: " + message.toString() + "<br>";
        };
        try {
          var latlng = new google.maps.LatLng(1.221, 103.8198);
          var myOptions = {
            zoom: 10,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            navigationControl: false,
            streetViewControl: false,
            backgroundColor: "#666970"
          };

          document.geocoder = new google.maps.Geocoder();
          document.map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
          document.map.onerror = alert
        } catch (e) {
          document.getElementById("errors").innerHTML += e.toString();
        }
        console.log("load ok")
        for(var item of uninit){
          new google.maps.Marker({
            position: item[1],
            map: document.map,
            title:item[0]
          })
        }

        document.zoomIn = function zoomIn() {
          var zoomLevel = document.map.getZoom();
          if (zoomLevel <= 20) document.map.setZoom(zoomLevel + 1);
        }

        document.zoomOut = function zoomOut() {
          var zoomLevel = document.map.getZoom();
          if (zoomLevel > 0) document.map.setZoom(zoomLevel - 1);
        }

        document.setMapTypeRoad = function setMapTypeRoad() {
          document.map.setMapTypeId(google.maps.MapTypeId.ROADMAP);
        }
        document.setMapTypeSatellite = function setMapTypeSatellite() {
          document.map.setMapTypeId(google.maps.MapTypeId.SATELLITE);
        }
        document.setMapTypeHybrid = function setMapTypeHybrid() {
          document.map.setMapTypeId(google.maps.MapTypeId.HYBRID);
        }
        document.setMapTypeTerrain = function setMapTypeTerrain() {
          document.map.setMapTypeId(google.maps.MapTypeId.TERRAIN);
        }

        document.goToLocation = function goToLocation(searchString) {
          document.geocoder.geocode({'address': searchString}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              document.map.setCenter(results[0].geometry.location);
            } else {
              alert("Geocode was not successful for the following reason: " + status);
            }
          });
        }
      }
    </script>
</head>
<body onload="initialize()">
<div id="errors" style="width:100%; height:10%"></div>
<div id="map_canvas" style="width:100%; height:90%"></div>
</body>
</html>